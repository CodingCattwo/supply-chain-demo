{"remainingRequest":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/babel-loader/lib/index.js!/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/eslint-loader/index.js??ref--13-0!/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/src/store/modules/user.js","dependencies":[{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/src/store/modules/user.js","mtime":1623815030936},{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCB7IGxvZ2luIGFzIF9sb2dpbiwgbG9nb3V0IGFzIF9sb2dvdXQsIGdldEluZm8gYXMgX2dldEluZm8gfSBmcm9tICJAL2FwaS91c2VyIjsKaW1wb3J0IHsgZ2V0VG9rZW4sIGdldFBhcnRpY2lwYXRlcklkLCBzZXRQYXJ0aWNpcGF0ZXJJZCwgc2V0VG9rZW4sIGdldFVzZXJJZCwgc2V0VXNlcklkLCByZW1vdmVUb2tlbiB9IGZyb20gIkAvdXRpbHMvYXV0aCI7CmltcG9ydCB7IHJlc2V0Um91dGVyIH0gZnJvbSAiQC9yb3V0ZXIiOwoKdmFyIGdldERlZmF1bHRTdGF0ZSA9IGZ1bmN0aW9uIGdldERlZmF1bHRTdGF0ZSgpIHsKICByZXR1cm4gewogICAgdG9rZW46IGdldFRva2VuKCksCiAgICBuYW1lOiAiIiwKICAgIGF2YXRhcjogIiIsCiAgICB1c2VyaWQ6IGdldFVzZXJJZCgpLAogICAgcGFydGljaXBhdGVyaWQ6IGdldFBhcnRpY2lwYXRlcklkKCkKICB9Owp9OwoKdmFyIHN0YXRlID0gZ2V0RGVmYXVsdFN0YXRlKCk7CnZhciBtdXRhdGlvbnMgPSB7CiAgUkVTRVRfU1RBVEU6IGZ1bmN0aW9uIFJFU0VUX1NUQVRFKHN0YXRlKSB7CiAgICBPYmplY3QuYXNzaWduKHN0YXRlLCBnZXREZWZhdWx0U3RhdGUoKSk7CiAgfSwKICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgdG9rZW4pIHsKICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgfSwKICBTRVRfVVNFUklEOiBmdW5jdGlvbiBTRVRfVVNFUklEKHN0YXRlLCB1c2VyaWQpIHsKICAgIHN0YXRlLnVzZXJpZCA9IHVzZXJpZDsKICB9LAogIFNFVF9QQVJUSUQ6IGZ1bmN0aW9uIFNFVF9QQVJUSUQoc3RhdGUsIHBhcnRpY2lwYXRlcmlkKSB7CiAgICBzdGF0ZS5wYXJ0aWNpcGF0ZXJpZCA9IHBhcnRpY2lwYXRlcmlkOwogIH0sCiAgU0VUX05BTUU6IGZ1bmN0aW9uIFNFVF9OQU1FKHN0YXRlLCBuYW1lKSB7CiAgICBzdGF0ZS5uYW1lID0gbmFtZTsKICB9LAogIFNFVF9BVkFUQVI6IGZ1bmN0aW9uIFNFVF9BVkFUQVIoc3RhdGUsIGF2YXRhcikgewogICAgc3RhdGUuYXZhdGFyID0gYXZhdGFyOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgLy8gdXNlciBsb2dpbgogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCB1c2VySW5mbykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgdmFyIHVzZXJuYW1lID0gdXNlckluZm8udXNlcm5hbWUsCiAgICAgICAgZW5jcnlwdGVkUGFzc3dvcmQgPSB1c2VySW5mby5lbmNyeXB0ZWRQYXNzd29yZDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIF9sb2dpbih7CiAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLnRyaW0oKSwKICAgICAgICBlbmNyeXB0ZWRQYXNzd29yZDogZW5jcnlwdGVkUGFzc3dvcmQudHJpbSgpCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgIGNvbW1pdCgiU0VUX1VTRVJJRCIsIGRhdGEudXNlcklkKTsKICAgICAgICBjb21taXQoIlNFVF9QQVJUSUQiLCBkYXRhLnBhcnRpY2lwYXRlcklkKTsKICAgICAgICBzZXRVc2VySWQoZGF0YS51c2VySWQpOwogICAgICAgIHNldFBhcnRpY2lwYXRlcklkKGRhdGEucGFydGljaXBhdGVySWQpOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIGdldCB1c2VyIGluZm8KICBnZXRJbmZvOiBmdW5jdGlvbiBnZXRJbmZvKF9yZWYyKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBfZ2V0SW5mbyhzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgIGlmICghZGF0YSkgewogICAgICAgICAgcmV0dXJuIHJlamVjdCgiVmVyaWZpY2F0aW9uIGZhaWxlZCwgcGxlYXNlIExvZ2luIGFnYWluLiIpOwogICAgICAgIH0KCiAgICAgICAgdmFyIG5hbWUgPSBkYXRhLm5hbWUsCiAgICAgICAgICAgIGF2YXRhciA9IGRhdGEuYXZhdGFyOwogICAgICAgIGNvbW1pdCgiU0VUX05BTUUiLCBuYW1lKTsKICAgICAgICBjb21taXQoIlNFVF9BVkFUQVIiLCBhdmF0YXIpOwogICAgICAgIHJlc29sdmUoZGF0YSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyB1c2VyIGxvZ291dAogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWYzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBfbG9nb3V0KHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZW1vdmVUb2tlbigpOyAvLyBtdXN0IHJlbW92ZSAgdG9rZW4gIGZpcnN0CgogICAgICAgIHJlc2V0Um91dGVyKCk7CiAgICAgICAgY29tbWl0KCJSRVNFVF9TVEFURSIpOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIHJlbW92ZSB0b2tlbgogIHJlc2V0VG9rZW46IGZ1bmN0aW9uIHJlc2V0VG9rZW4oX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAoKICAgICAgY29tbWl0KCJSRVNFVF9TVEFURSIpOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"sources":["/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/src/store/modules/user.js"],"names":["login","logout","getInfo","getToken","getParticipaterId","setParticipaterId","setToken","getUserId","setUserId","removeToken","resetRouter","getDefaultState","token","name","avatar","userid","participaterid","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_USERID","SET_PARTID","SET_NAME","SET_AVATAR","actions","userInfo","commit","username","encryptedPassword","Promise","resolve","reject","trim","then","response","data","userId","participaterId","catch","error","resetToken","namespaced"],"mappings":"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","sourcesContent":["import { login, logout, getInfo } from \"@/api/user\";\nimport {\n  getToken,\n  getParticipaterId,\n  setParticipaterId,\n  setToken,\n  getUserId,\n  setUserId,\n  removeToken\n} from \"@/utils/auth\";\nimport { resetRouter } from \"@/router\";\n\nconst getDefaultState = () => {\n  return {\n    token: getToken(),\n    name: \"\",\n    avatar: \"\",\n    userid: getUserId(),\n    participaterid: getParticipaterId()\n  };\n};\n\nconst state = getDefaultState();\n\nconst mutations = {\n  RESET_STATE: state => {\n    Object.assign(state, getDefaultState());\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token;\n  },\n  SET_USERID: (state, userid) => {\n    state.userid = userid;\n  },\n  SET_PARTID: (state, participaterid) => {\n    state.participaterid = participaterid;\n  },\n  SET_NAME: (state, name) => {\n    state.name = name;\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar;\n  }\n};\n\nconst actions = {\n  // user login\n  login({ commit }, userInfo) {\n    const { username, encryptedPassword } = userInfo;\n    return new Promise((resolve, reject) => {\n      login({\n        username: username.trim(),\n        encryptedPassword: encryptedPassword.trim()\n      })\n        .then(response => {\n          const { data } = response;\n          commit(\"SET_USERID\", data.userId);\n          commit(\"SET_PARTID\", data.participaterId);\n          setUserId(data.userId);\n          setParticipaterId(data.participaterId);\n          resolve();\n        })\n        .catch(error => {\n          reject(error);\n        });\n    });\n  },\n\n  // get user info\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token)\n        .then(response => {\n          const { data } = response;\n\n          if (!data) {\n            return reject(\"Verification failed, please Login again.\");\n          }\n\n          const { name, avatar } = data;\n\n          commit(\"SET_NAME\", name);\n          commit(\"SET_AVATAR\", avatar);\n          resolve(data);\n        })\n        .catch(error => {\n          reject(error);\n        });\n    });\n  },\n\n  // user logout\n  logout({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      logout(state.token)\n        .then(() => {\n          removeToken(); // must remove  token  first\n          resetRouter();\n          commit(\"RESET_STATE\");\n          resolve();\n        })\n        .catch(error => {\n          reject(error);\n        });\n    });\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      removeToken(); // must remove  token  first\n      commit(\"RESET_STATE\");\n      resolve();\n    });\n  }\n};\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n};\n"]}]}