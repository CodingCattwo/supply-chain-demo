{"remainingRequest":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/babel-loader/lib/index.js!/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/src/views/pay/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/src/views/pay/index.vue","mtime":1623815030940},{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0U2lnbkluZm8sIHRvUGF5IH0gZnJvbSAiQC9hcGkvdGFibGUiOwppbXBvcnQgeyBnZXRVc2VySWQgfSBmcm9tICJAL3V0aWxzL2F1dGgiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciB2YWxpZEFtb3VudCA9IGZ1bmN0aW9uIHZhbGlkQW1vdW50KHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgewogICAgICB2YXIgcmVnID0gL15cZCsoXC5cZHsxLDJ9KT8kLzsKCiAgICAgIGlmICghcmVnLnRlc3QodmFsdWUpKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLor7fovpPlhaXmraPnoa7nmoTph5Hpop0iKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKCiAgICByZXR1cm4gewogICAgICBwYXlEYXRhOiBbXSwKICAgICAgZGlhbG9nUGF5VmlzaWJsZTogZmFsc2UsCiAgICAgIGFtb3VudFJ1bGVzOiB7CiAgICAgICAgdG90YWxBbW91bnQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXph5Hpop0iLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfSwgewogICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZEFtb3VudCwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIHNpZ25EYXRhOiBbXSwKICAgICAgZm9ybTogewogICAgICAgIGNoYWluSWQ6ICIiLAogICAgICAgIHRvdGFsQW1vdW50OiAiIgogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0U2lnbkRhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdvQmFjazogZnVuY3Rpb24gZ29CYWNrKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogIi9saXN0IgogICAgICB9KTsKICAgIH0sCiAgICBnZXRTaWduRGF0YTogZnVuY3Rpb24gZ2V0U2lnbkRhdGEoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgaWQgPSBnZXRVc2VySWQoKTsKICAgICAgZ2V0U2lnbkluZm8oaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLnNpZ25EYXRhID0gcmVzLmRhdGE7CiAgICAgICAgX3RoaXMuZm9ybS5jaGFpbklkID0gX3RoaXMuc2lnbkRhdGFbMF0uY2hhaW5JZDsKICAgICAgfSk7CiAgICB9LAogICAgc3VibWl0UGF5SW5mbzogZnVuY3Rpb24gc3VibWl0UGF5SW5mbyhmb3JtTmFtZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkge30KICAgICAgfSk7CiAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgY2hhaW5JZDogdGhpcy5mb3JtLmNoYWluSWQsCiAgICAgICAgdG90YWxBbW91bnQ6IHRoaXMuZm9ybS50b3RhbEFtb3VudCAqIDEwMAogICAgICB9OwogICAgICB0b1BheShwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuY29kZSA9PT0gMCkgewogICAgICAgICAgX3RoaXMyLnBheURhdGEgPSByZXMuZGF0YTsKICAgICAgICAgIF90aGlzMi5kaWFsb2dQYXlWaXNpYmxlID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA,SAAA,WAAA,EAAA,KAAA,QAAA,aAAA;AACA,SAAA,SAAA,QAAA,cAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,QAAA,WAAA,GAAA,SAAA,WAAA,CAAA,IAAA,EAAA,KAAA,EAAA,QAAA,EAAA;AACA,UAAA,GAAA,GAAA,mBAAA;;AACA,UAAA,CAAA,GAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA;AACA,QAAA,QAAA,CAAA,IAAA,KAAA,CAAA,UAAA,CAAA,CAAA;AACA,OAFA,MAEA;AACA,QAAA,QAAA;AACA;AACA,KAPA;;AAQA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,gBAAA,EAAA,KAFA;AAGA,MAAA,WAAA,EAAA;AACA,QAAA,WAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,OAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA,EAEA;AAAA,UAAA,SAAA,EAAA,WAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAFA;AADA,OAHA;AASA,MAAA,QAAA,EAAA,EATA;AAUA,MAAA,IAAA,EAAA;AACA,QAAA,OAAA,EAAA,EADA;AAEA,QAAA,WAAA,EAAA;AAFA;AAVA,KAAA;AAeA,GAzBA;AA0BA,EAAA,OA1BA,qBA0BA;AACA,SAAA,WAAA;AACA,GA5BA;AA6BA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAAA;AACA,KAHA;AAIA,IAAA,WAJA,yBAIA;AAAA;;AACA,UAAA,EAAA,GAAA,SAAA,EAAA;AACA,MAAA,WAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,QAAA,GAAA,GAAA,CAAA,IAAA;AACA,QAAA,KAAA,CAAA,IAAA,CAAA,OAAA,GAAA,KAAA,CAAA,QAAA,CAAA,CAAA,EAAA,OAAA;AACA,OAHA;AAIA,KAVA;AAWA,IAAA,aAXA,yBAWA,QAXA,EAWA;AAAA;;AACA,WAAA,KAAA,CAAA,QAAA,EAAA,QAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,EAAA,CACA;AACA,OAHA;AAIA,UAAA,MAAA,GAAA;AACA,QAAA,OAAA,EAAA,KAAA,IAAA,CAAA,OADA;AAEA,QAAA,WAAA,EAAA,KAAA,IAAA,CAAA,WAAA,GAAA;AAFA,OAAA;AAKA,MAAA,KAAA,CAAA,MAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,OAAA,GAAA,GAAA,CAAA,IAAA;AACA,UAAA,MAAA,CAAA,gBAAA,GAAA,IAAA;AACA;AACA,OALA;AAMA;AA3BA;AA7BA,CAAA","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form\n      ref=\"form\"\n      :model=\"form\"\n      :rules=\"amountRules\"\n      label-width=\"120px\"\n      class=\"form-box\"\n    >\n      <el-form-item label=\"链路选择\">\n        <el-select v-model=\"form.chainId\" placeholder=\"链路选择\">\n          <el-option\n            v-for=\"item in signData\"\n            :label=\"item.title\"\n            :value=\"item.chainId\"\n            :key=\"item.chainId\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"支付金额\" prop=\"totalAmount\">\n        <el-input v-model=\"form.totalAmount\" />\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitPayInfo('form')\"\n          >提交</el-button\n        >\n        <el-button @click=\"goBack\">返回</el-button>\n      </el-form-item>\n    </el-form>\n    <el-dialog title=\"支付成功\" :visible.sync=\"dialogPayVisible\">\n      <el-table :data=\"payData\">\n        <el-table-column property=\"txHash\" label=\"交易地址\"></el-table-column>\n        <el-table-column label=\"支付对象及金额\" width=\"200\">\n          <template slot-scope=\"scope\"\n            >{{ scope.row.orgName }}:<b>{{\n              scope.row.amount / 100\n            }}</b></template\n          ></el-table-column\n        >\n        <el-table-column label=\"余额\">\n          <template slot-scope=\"scope\"\n            >{{ scope.row.orgName }}:<b>{{\n              scope.row.balance / 100\n            }}</b></template\n          ></el-table-column\n        >\n      </el-table>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport { getSignInfo, toPay } from \"@/api/table\";\nimport { getUserId } from \"@/utils/auth\";\nexport default {\n  data() {\n    const validAmount = (rule, value, callback) => {\n      const reg = /^\\d+(\\.\\d{1,2})?$/;\n      if (!reg.test(value)) {\n        callback(new Error(\"请输入正确的金额\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      payData: [],\n      dialogPayVisible: false,\n      amountRules: {\n        totalAmount: [\n          { required: true, message: \"请输入金额\", trigger: \"blur\" },\n          { validator: validAmount, trigger: \"blur\" }\n        ]\n      },\n      signData: [],\n      form: {\n        chainId: \"\",\n        totalAmount: \"\"\n      }\n    };\n  },\n  created() {\n    this.getSignData();\n  },\n  methods: {\n    goBack() {\n      this.$router.push({ path: \"/list\" });\n    },\n    getSignData() {\n      const id = getUserId();\n      getSignInfo(id).then(res => {\n        this.signData = res.data;\n        this.form.chainId = this.signData[0].chainId;\n      });\n    },\n    submitPayInfo(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n        }\n      });\n      const params = {\n        chainId: this.form.chainId,\n        totalAmount: this.form.totalAmount * 100\n      };\n\n      toPay(params).then(res => {\n        if (res.code === 0) {\n          this.payData = res.data;\n          this.dialogPayVisible = true;\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.el-select {\n  width: 100%;\n}\n.form-box {\n  width: 40%;\n}\n</style>\n"],"sourceRoot":"src/views/pay"}]}