{"remainingRequest":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/babel-loader/lib/index.js!/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/src/views/join/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/src/views/join/index.vue","mtime":1624431683360},{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0Sm9pbkxpc3QsIGNoZWNrU2lnbiB9IGZyb20gIkAvYXBpL3RhYmxlIjsKaW1wb3J0IHsgZ2V0VXNlcklkIH0gZnJvbSAiQC91dGlscy9hdXRoIjsKZXhwb3J0IGRlZmF1bHQgewogIGZpbHRlcnM6IHsKICAgIHN0YXR1c0ZpbHRlcjogZnVuY3Rpb24gc3RhdHVzRmlsdGVyKHN0YXR1cykgewogICAgICB2YXIgc3RhdHVzTWFwID0gewogICAgICAgIHB1Ymxpc2hlZDogInN1Y2Nlc3MiLAogICAgICAgIGRyYWZ0OiAiZ3JheSIsCiAgICAgICAgZGVsZXRlZDogImRhbmdlciIKICAgICAgfTsKICAgICAgcmV0dXJuIHN0YXR1c01hcFtzdGF0dXNdOwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IG51bGwsCiAgICAgIGxpc3RMb2FkaW5nOiB0cnVlLAogICAgICBzdXBwbGllckRhdGE6IFtdLAogICAgICBkaWFsb2dTdXBwbGllclZpc2libGU6IGZhbHNlLAogICAgICBkaWFsb2dTaWduVmlzaWJsZTogZmFsc2UsCiAgICAgIHNpZ25EYXRhOiB7CiAgICAgICAgbmVlZFNpZ25PcmdOYW1lczogW10sCiAgICAgICAgc2lnbmVkT3JnTmFtZXM6IFtdCiAgICAgIH0sCiAgICAgIG5lZWRTaWduQ291bnQ6ICIiLAogICAgICBzaWduZWRDb3VudDogIiIKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaERhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNyZWF0ZUNoYWluOiBmdW5jdGlvbiBjcmVhdGVDaGFpbigpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9saXN0L2NyZWF0ZSIpOwogICAgfSwKICAgIGhhbmRsZVNpZ246IGZ1bmN0aW9uIGhhbmRsZVNpZ24oaW5kZXgsIHJvdykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGNoYWluSWQgPSByb3cuY2hhaW5JZDsKICAgICAgY2hlY2tTaWduKGNoYWluSWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMuZGlhbG9nU2lnblZpc2libGUgPSB0cnVlOwogICAgICAgIF90aGlzLnNpZ25EYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBfdGhpcy5uZWVkU2lnbkNvdW50ID0gX3RoaXMuc2lnbkRhdGEubmVlZFNpZ25PcmdOYW1lcy5sZW5ndGg7CiAgICAgICAgX3RoaXMuc2lnbmVkQ291bnQgPSBfdGhpcy5zaWduRGF0YS5zaWduZWRPcmdOYW1lcy5sZW5ndGg7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVN1cHBsaWVyOiBmdW5jdGlvbiBoYW5kbGVTdXBwbGllcihpbmRleCwgcm93KSB7CiAgICAgIHRoaXMuZGlhbG9nU3VwcGxpZXJWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5zdXBwbGllckRhdGEgPSByb3cuaXRlbUxpc3Q7CiAgICB9LAogICAgZmV0Y2hEYXRhOiBmdW5jdGlvbiBmZXRjaERhdGEoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGlkID0gZ2V0VXNlcklkKCk7CiAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlOwogICAgICBnZXRKb2luTGlzdChpZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIubGlzdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgX3RoaXMyLmxpc3RMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8IA,SAAA,WAAA,EAAA,SAAA,QAAA,aAAA;AACA,SAAA,SAAA,QAAA,cAAA;AAEA,eAAA;AACA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,MADA,EACA;AACA,UAAA,SAAA,GAAA;AACA,QAAA,SAAA,EAAA,SADA;AAEA,QAAA,KAAA,EAAA,MAFA;AAGA,QAAA,OAAA,EAAA;AAHA,OAAA;AAKA,aAAA,SAAA,CAAA,MAAA,CAAA;AACA;AARA,GADA;AAWA,EAAA,IAXA,kBAWA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,IADA;AAEA,MAAA,WAAA,EAAA,IAFA;AAGA,MAAA,YAAA,EAAA,EAHA;AAIA,MAAA,qBAAA,EAAA,KAJA;AAKA,MAAA,iBAAA,EAAA,KALA;AAMA,MAAA,QAAA,EAAA;AACA,QAAA,gBAAA,EAAA,EADA;AAEA,QAAA,cAAA,EAAA;AAFA,OANA;AAUA,MAAA,aAAA,EAAA,EAVA;AAWA,MAAA,WAAA,EAAA;AAXA,KAAA;AAaA,GAzBA;AA0BA,EAAA,OA1BA,qBA0BA;AACA,SAAA,SAAA;AACA,GA5BA;AA6BA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,cAAA;AACA,KAHA;AAIA,IAAA,UAJA,sBAIA,KAJA,EAIA,GAJA,EAIA;AAAA;;AAAA,UACA,OADA,GACA,GADA,CACA,OADA;AAEA,MAAA,SAAA,CAAA,OAAA,CAAA,CAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,iBAAA,GAAA,IAAA;AACA,QAAA,KAAA,CAAA,QAAA,GAAA,QAAA,CAAA,IAAA;AACA,QAAA,KAAA,CAAA,aAAA,GAAA,KAAA,CAAA,QAAA,CAAA,gBAAA,CAAA,MAAA;AACA,QAAA,KAAA,CAAA,WAAA,GAAA,KAAA,CAAA,QAAA,CAAA,cAAA,CAAA,MAAA;AACA,OALA;AAMA,KAZA;AAaA,IAAA,cAbA,0BAaA,KAbA,EAaA,GAbA,EAaA;AACA,WAAA,qBAAA,GAAA,IAAA;AACA,WAAA,YAAA,GAAA,GAAA,CAAA,QAAA;AACA,KAhBA;AAiBA,IAAA,SAjBA,uBAiBA;AAAA;;AACA,UAAA,EAAA,GAAA,SAAA,EAAA;AACA,WAAA,WAAA,GAAA,IAAA;AACA,MAAA,WAAA,CAAA,EAAA,CAAA,CAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,MAAA,CAAA,IAAA,GAAA,QAAA,CAAA,IAAA;AACA,QAAA,MAAA,CAAA,WAAA,GAAA,KAAA;AACA,OAHA;AAIA;AAxBA;AA7BA,CAAA","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <!-- <div class=\"btn-top\">\n      <el-button @click=\"createChain\" type=\"primary\" plain>新建</el-button>\n    </div> -->\n    <el-table\n      v-loading=\"listLoading\"\n      :data=\"list\"\n      element-loading-text=\"Loading\"\n    >\n      <el-table-column align=\"center\" label=\"序号\" width=\"95\">\n        <template slot-scope=\"scope\">\n          {{ scope.$index }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"公司名\" width=\"190\" show-overflow-tooltip>\n        <template slot-scope=\"scope\">\n          {{ scope.row.orgName }}\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"链名称\"\n        width=\"110\"\n        align=\"center\"\n        show-overflow-tooltip\n      >\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.title }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column\n        label=\"描述\"\n        width=\"110\"\n        align=\"center\"\n        show-overflow-tooltip\n      >\n        <template slot-scope=\"scope\">\n          {{ scope.row.desc }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"状态\" width=\"80\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <div v-if=\"scope.row.status == 'confirmed'\">\n            <el-tag size=\"small\">已确认</el-tag>\n          </div>\n          <div v-else>\n            <el-tag type=\"info\" size=\"small\">草稿</el-tag>\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"合约地址\" width=\"360\" align=\"center\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.contractAddress }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"存证KEY\" width=\"360\" align=\"center\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.evidenceKey }}\n        </template>\n      </el-table-column>\n      <!-- <el-table-column label=\"查看供应商\" width=\"110\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            @click=\"handleSupplier(scope.$index, scope.row)\"\n            >查看</el-button\n          >\n        </template>\n      </el-table-column> -->\n      <el-table-column label=\"操作\" width=\"210\" align=\"center\" fixed=\"right\">\n        <template slot-scope=\"scope\">\n          <a class=\"btn-link\" @click=\"handleSupplier(scope.$index, scope.row)\"\n            >查看参与方</a\n          ><span class=\"individer-line\">|</span>\n          <a class=\"btn-link\" @click=\"handleSign(scope.$index, scope.row)\"\n            >查看签名状态</a\n          >\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-dialog title=\"供应商信息\" :visible.sync=\"dialogSupplierVisible\">\n      <el-table :data=\"supplierData\">\n        <el-table-column\n          property=\"participaterDidId\"\n          label=\"参与者数字身份\"\n          width=\"\"\n        ></el-table-column>\n        <el-table-column\n          property=\"participaterOrgName\"\n          label=\"参与者公司名\"\n          width=\"200\"\n          show-overflow-tooltip\n        ></el-table-column>\n        <el-table-column label=\"分成比例\" width=\"90\">\n          <template slot-scope=\"scope\"\n            >{{ scope.row.portion }}%</template\n          ></el-table-column\n        >\n        <el-table-column\n          property=\"role\"\n          width=\"100\"\n          label=\"角色\"\n          show-overflow-tooltip\n        ></el-table-column>\n      </el-table>\n    </el-dialog>\n    <!-- 签名状态弹框 -->\n    <el-dialog\n      title=\"签名状态\"\n      :visible.sync=\"dialogSignVisible\"\n      width=\"30%\"\n      class=\"sign-box\"\n    >\n      <div class=\"content\">\n        <el-divider content-position=\"left\"\n          ><i class=\"el-icon-check\"></i>已签名({{ signedCount }})</el-divider\n        >\n        <div class=\"list\">\n          <template v-if=\"signData.signedOrgNames\">\n            <span v-for=\"item in signData.signedOrgNames\" :key=\"item\">\n              <span>{{ item }}</span>\n              <el-divider direction=\"vertical\"></el-divider\n            ></span>\n          </template>\n        </div>\n        <el-divider content-position=\"left\" class=\"need-sign-title\"\n          ><i class=\"el-icon-edit\"></i>需要签名({{ needSignCount }})</el-divider\n        >\n        <span\n          class=\"list\"\n          v-for=\"(item, index) in signData.needSignOrgNames\"\n          :key=\"index\"\n        >\n          <span>{{ item }}</span>\n          <el-divider direction=\"vertical\"></el-divider>\n        </span>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { getJoinList, checkSign } from \"@/api/table\";\nimport { getUserId } from \"@/utils/auth\";\n\nexport default {\n  filters: {\n    statusFilter(status) {\n      const statusMap = {\n        published: \"success\",\n        draft: \"gray\",\n        deleted: \"danger\",\n      };\n      return statusMap[status];\n    },\n  },\n  data() {\n    return {\n      list: null,\n      listLoading: true,\n      supplierData: [],\n      dialogSupplierVisible: false,\n      dialogSignVisible: false,\n      signData: {\n        needSignOrgNames: [],\n        signedOrgNames: [],\n      },\n      needSignCount: \"\",\n      signedCount: \"\",\n    };\n  },\n  created() {\n    this.fetchData();\n  },\n  methods: {\n    createChain() {\n      this.$router.push(\"/list/create\");\n    },\n    handleSign(index, row) {\n      const { chainId } = row;\n      checkSign(chainId).then((response) => {\n        this.dialogSignVisible = true;\n        this.signData = response.data;\n        this.needSignCount = this.signData.needSignOrgNames.length;\n        this.signedCount = this.signData.signedOrgNames.length;\n      });\n    },\n    handleSupplier(index, row) {\n      this.dialogSupplierVisible = true;\n      this.supplierData = row.itemList;\n    },\n    fetchData() {\n      const id = getUserId();\n      this.listLoading = true;\n      getJoinList(id).then((response) => {\n        this.list = response.data;\n        this.listLoading = false;\n      });\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n.btn-top {\n  padding-bottom: 20px;\n}\n.btn-link {\n  color: #2d8cf0;\n}\n.individer-line {\n  padding: 0 10px;\n  color: #c2c2c2;\n}\n.el-divider--horizontal {\n  margin: 35px 0;\n}\n.el-table th {\n  background: #f8f8f9;\n  color: #515a6e;\n}\n.sign-box {\n  .need-sign-title {\n    margin-top: 20px;\n  }\n  .el-dialog__body {\n    padding-bottom: 60px;\n    padding-top: 0;\n  }\n}\n</style>\n"],"sourceRoot":"src/views/join"}]}