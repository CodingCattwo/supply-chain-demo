{"remainingRequest":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/src/views/pay/index.vue?vue&type=style&index=0&id=69dcca81&lang=scss&scoped=true&","dependencies":[{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/src/views/pay/index.vue","mtime":1623815030940},{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lannywu/A2021/06/0616/supply-chain-demo/frontend/supplychain/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5lbC1zZWxlY3QgewogIHdpZHRoOiAxMDAlOwp9Ci5mb3JtLWJveCB7CiAgd2lkdGg6IDQwJTsKfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmHA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/pay","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form\n      ref=\"form\"\n      :model=\"form\"\n      :rules=\"amountRules\"\n      label-width=\"120px\"\n      class=\"form-box\"\n    >\n      <el-form-item label=\"链路选择\">\n        <el-select v-model=\"form.chainId\" placeholder=\"链路选择\">\n          <el-option\n            v-for=\"item in signData\"\n            :label=\"item.title\"\n            :value=\"item.chainId\"\n            :key=\"item.chainId\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"支付金额\" prop=\"totalAmount\">\n        <el-input v-model=\"form.totalAmount\" />\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitPayInfo('form')\"\n          >提交</el-button\n        >\n        <el-button @click=\"goBack\">返回</el-button>\n      </el-form-item>\n    </el-form>\n    <el-dialog title=\"支付成功\" :visible.sync=\"dialogPayVisible\">\n      <el-table :data=\"payData\">\n        <el-table-column property=\"txHash\" label=\"交易地址\"></el-table-column>\n        <el-table-column label=\"支付对象及金额\" width=\"200\">\n          <template slot-scope=\"scope\"\n            >{{ scope.row.orgName }}:<b>{{\n              scope.row.amount / 100\n            }}</b></template\n          ></el-table-column\n        >\n        <el-table-column label=\"余额\">\n          <template slot-scope=\"scope\"\n            >{{ scope.row.orgName }}:<b>{{\n              scope.row.balance / 100\n            }}</b></template\n          ></el-table-column\n        >\n      </el-table>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport { getSignInfo, toPay } from \"@/api/table\";\nimport { getUserId } from \"@/utils/auth\";\nexport default {\n  data() {\n    const validAmount = (rule, value, callback) => {\n      const reg = /^\\d+(\\.\\d{1,2})?$/;\n      if (!reg.test(value)) {\n        callback(new Error(\"请输入正确的金额\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      payData: [],\n      dialogPayVisible: false,\n      amountRules: {\n        totalAmount: [\n          { required: true, message: \"请输入金额\", trigger: \"blur\" },\n          { validator: validAmount, trigger: \"blur\" }\n        ]\n      },\n      signData: [],\n      form: {\n        chainId: \"\",\n        totalAmount: \"\"\n      }\n    };\n  },\n  created() {\n    this.getSignData();\n  },\n  methods: {\n    goBack() {\n      this.$router.push({ path: \"/list\" });\n    },\n    getSignData() {\n      const id = getUserId();\n      getSignInfo(id).then(res => {\n        this.signData = res.data;\n        this.form.chainId = this.signData[0].chainId;\n      });\n    },\n    submitPayInfo(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n        }\n      });\n      const params = {\n        chainId: this.form.chainId,\n        totalAmount: this.form.totalAmount * 100\n      };\n\n      toPay(params).then(res => {\n        if (res.code === 0) {\n          this.payData = res.data;\n          this.dialogPayVisible = true;\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.el-select {\n  width: 100%;\n}\n.form-box {\n  width: 40%;\n}\n</style>\n"]}]}